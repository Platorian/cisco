**_Open-source intelligence (OSINT) gathering_** is a method of gathering publicly available intelligence sources to collect and analyze information about a target. OSINT is “open source” because collecting the information does not require any type of covert methods. Typically, the information can be found on the Internet. The larger the online presence of the target, the more information that will be available. This type of collection can often start with a simple Google search, which can reveal a significant amount of information about a target. It will at least give you enough information to know what direction to go with your information-gathering process. Let's cover two tools that can be used for OSINT gathering: Recong-ng and Shodan.

**Recon-ng**

This module covers a number of individual sources and tools used for information gathering. These tools are all very effective for their specific uses; however, wouldn’t it be great if there were a tool that could pull together all these different functions? This is where Recon-ng comes in. It is a framework developed by Tim Tomes of Black Hills Information Security. This tool was developed in Python with Metasploit **msfconsole** in mind. If you have used the Metasploit console before, Recon-ng should be familiar and easy to understand.

Recon-ng is a modular framework, which makes it easy to develop and integrate new functionality. It is highly effective in social networking site enumeration because of its use of application programming interfaces (APIs) to gather information. It also includes a reporting feature that allows you to export data in different report formats. Because you will always need to provide some kind of deliverable in any testing you do, Recon-ng is especially valuable.

Select each of the following steps for an example of running Recon-ng in Kali Linux.

---

**Step 1: Start Recon-ng**

To start using Recon-ng, you simply run **recon-ng** from a new terminal window. Example 3-11 shows the command and the initial menu that Recon-ng starts with.

**_Example 3-11_** **_-_** _Starting Recon-ng_

```
|--[omar@websploit]--[~] 
|--- $ recon-ng  
[*] Version check disabled.
```

**Step 2. View available commands**

To get an idea of what commands are available in the Recon-ng command-line tool, you can simply type **help** and press Enter. Example 3-12 shows the output of the **help** command.

**_Example 3-12_** **_-_** _Recon-ng_ **_help_** _Command_

```
recon-ng][default] > help 
Commands (type [help|?] ):
```

**Step 3. Search for available modules.**

Before you can start gathering information using the Recon-ng tool, you need to understand what modules are available. (You can see from the initial screen in Example 3-11 the current number of modules that are installed in Recon-ng.) Recon-ng comes with a “marketplace,” where you can search for available modules to be installed. You can use the **marketplace search** command to search for all the available modules in Recon-ng, as demonstrated in Example 3-13.

Scroll the output in Example 3-13 to the right to see the **D** and **K** columns The letter **D** indicates that the module has dependencies. The letter **K** indicates that an API key is needed in order to use the resources used in a particular module. For example, the module with the path recon/companies-contacts/censys_email_address has dependencies and needs an API key in order to query the Censys database. (Censys is a very popular resource for querying OSINT data.)

**_Example 3-13_** _- The Recon-ng Marketplace Search_

```
[recon-ng][default] > marketplace search
```

**Step 4. Refresh the marketplace.**

You can refresh the data about the available modules by using the **marketplace refresh** command, as shown in Example 3-14.

**_Example 3-14_** **_-_** _Refreshing the Recon-ng Marketplace Data_

```
 [recon-ng][default] > marketplace refresh 
 [*] Marketplace index refreshed.  
 [recon-ng][default] >
```

**Step 5. Search the marketplace.**

Let’s perform a quick search to find different subdomains of one of my domains (h4cker.org). We can use the module **bing_domain_web** to try to find any subdomains leveraging the Bing search engine. You can perform a keyword search for any modules by using the command **marketplace search <** _keyword_ **>**, as demonstrated in Example 3-15.

**_Example 3-15_** **_-_** _Marketplace Keyword Search_

```
[recon-ng][default] > marketplace search bing 
[*] Searching module index for 'bing'...
```

**Step 6. Install a module.**

Several results matched the bing keyword. However, the one that we are interested in is recon/domains-hosts/bing_domain_web. You can install the module by using the **marketplace install** command, as shown in Example 3-16.

**_Example 3-16_** **_-_** _Installing a Recon-ng Module_

```
[recon-ng][default] > marketplace install recon/domains-hosts/bing_domain_web [*] Module installed: recon/domains-hosts/bing_domain_web 
[*] Reloading modules... 
[recon-ng][default] > 
```

**Step 7. Show installed modules.**

You can use the **modules search** command (as shown in Example 3-17) to show all the modules that have been installed in Recon-ng.

**_Example 3-17_** **_-_** _Recon-ng Installed Modules_

```
[recon-ng][default] > modules search   
Discovery   
---------     
discovery/info_disclosure/interesting_files   
Recon
```

**Step 8. Load a module.**

To load the module that you would like to use, use the **modules load** command. In Example 3-18, the bing_domain_web module is loaded. Notice that the prompt changed to include the name of the loaded module. After the module is loaded, you can display the module options by using the **info** command.

**_Example 3-18_** **_-_** _Loading an Installed Module in Recon-ng_

```
[recon-ng][default] > modules load recon/domains-hosts/bing_domain_web 
[recon-ng][default][bing_domain_web] > info       
Name: Bing Hostname Enumerator     
Author: Tim Tomes (@lanmaster53)    
Version: 1.1
```

**Step 9. Change the source.**

You can change the source (the domain to be used to find its subdomains) by using the command **options set SOURCE**, as demonstrated in Example 3-19. After the source domain is set, you can type **run** to run the query. The highlighted lines show that four subdomains were found using the **bing_domain_web** module.

**_Example 3-19_** **_-_** _Setting the Source Domain and Running the Query_

```
[recon-ng][default][bing_domain_web] > options set SOURCE h4cker.org 
SOURCE => h4cker.org 
[recon-ng][default][bing_domain_web] > run 
---------- 
H4CKER.ORG 
---------- 
[*] URL: https://www.bing.com/search?first=0&q=domain%3Ah4cker.org 
[*] Country: None 
[*] Host: bootcamp.h4cker.org
```

Recon-ng is incredibly powerful because it uses the APIs of various OSINT resources to gather information. Its modules can query sites such as Facebook, Indeed, Flickr, Instagram, Shodan, LinkedIn, and YouTube.

**TIP** You can also combine other modules to find additional information about a specific target. For example, you can use the recon/domains-hosts/brute_hosts module to use wordlists and perform DNS queries to find additional subdomains. Hacking is all about the process of thinking like an attacker and developing a good methodology. I strongly recommend that you "go beyond the tool" and default behavior and develop your own methodology by combining tools and other resources to find information and potential vulnerabilities to exploit.

---

**Shodan**

**_Shodan_** is an organization that scans the Internet 24 hours a day, 365 days a year. The results of those scans are stored in a database that can be queried at shodan.io or by using an API. You can use Shodan to query for vulnerable hosts, Internet of Things (IoT) devices, and many other systems that should not be exposed or connected to the public Internet. Figure 3-5 shows different categories of systems found by Shodan scans, including industrial control systems (ICS), databases, network infrastructure devices, and video games.

**_Figure 3-5_** _- Exploring the Shodan Database_

![[Pasted image 20240621092608.png]]

Figure 3-6 shows a query performed to find network infrastructure devices that are running a broken protocol called Cisco Smart Install. Attackers have leveraged this protocol for years to compromise different infrastructures. Cisco removed this protocol from its systems many years ago. However, many people are still using it in devices connected to the public Internet.

**NOTE** Cisco has warned customers for many years about the misuse of this feature in an informational security advisory that can be accessed at _[https://tools.cisco.com/security/center/content/CiscoSecurityAdvisory/cisco-sa-20170214-smi](https://tools.cisco.com/security/center/content/CiscoSecurityAdvisory/cisco-sa-20170214-smi)_.

**_Figure 3-6_** _- Revealing Vulnerable Systems Using Shodan_

![[Pasted image 20240621092623.png]]

**TIP** Keep in mind that even though this is public information, you should not interact with any systems shown in Shodan results without permission from the owner. If the owner has a bug bounty program, you may get recognition and a reward for finding the affected system. A bug bounty is a program designed to reward security researchers and ethical hackers for finding vulnerabilities in a product, an application, or a system. In most cases, the compensation is monetary. Omar Santos has included several resources in his GitHub repository on how to get started in bug bounties; see [_https://github.com/The-Art-of-Hacking/h4cker/tree/master/bug-bounties_](https://github.com/The-Art-of-Hacking/h4cker/tree/master/bug-bounties).





